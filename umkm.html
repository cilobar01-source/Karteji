<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>UMKM KARTEJI</title>
<link rel="icon" href="assets/logo.svg"/>
<style>
:root{--biru:#0e4c92;--emas:#f6c445;--bg:#f7f9fc;--text:#1e293b;--card:#fff;--line:#e5e7eb;}
body{margin:0;font-family:'Poppins',system-ui;background:var(--bg);color:var(--text);}
header{position:sticky;top:0;display:flex;align-items:center;justify-content:space-between;padding:1rem;background:#fff;border-bottom:1px solid var(--line);z-index:20;}
header h1{margin:0;font-size:1.1rem;color:var(--biru);}
.grid{display:grid;gap:1rem;padding:1rem;}
@media(min-width:700px){.grid{grid-template-columns:repeat(4,1fr)}}
.card{background:var(--card);border:1px solid var(--line);border-radius:12px;overflow:hidden;cursor:pointer;transition:transform .25s;}
.card:hover{transform:translateY(-4px)}
.card img{width:100%;height:180px;object-fit:cover;}
.card .info{padding:.6rem .8rem;}
.card b{font-size:.95rem;display:block;margin-bottom:.3rem}
.card span{color:var(--emas);font-weight:700;}
footer{text-align:center;padding:1.2rem;font-size:.85rem;color:#64748b;}
</style>
</head>
<body>
<header>
  <h1>üõçÔ∏è UMKM KARTEJI</h1>
  <a href="index.html" style="color:var(--biru)">‚Üê Kembali</a>
</header>
<div id="list" class="grid"></div>
<footer>¬© 2025 KARTEJI Cilosari Barat</footer>

<script type="module">
import {initializeApp} from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
import {getFirestore,collection,getDocs,query,orderBy} from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";
const firebaseConfig={apiKey:"AIzaSyCgJC8OQBG_wQt57tZHfNuVKPb2VVlAalI",authDomain:"karang-taruna-aadaf.firebaseapp.com",projectId:"karang-taruna-aadaf",storageBucket:"karang-taruna-aadaf.appspot.com",messagingSenderId:"367208001887",appId:"1:367208001887:web:bce5982d99edefb7e746ea"};
const app=initializeApp(firebaseConfig);const db=getFirestore(app);

async function load(){
  const c=document.getElementById('list');
  const snap=await getDocs(query(collection(db,'umkm'),orderBy('createdAt','desc')));
  c.innerHTML='';
  snap.forEach(d=>{
    const u=d.data();const f=Array.isArray(u.foto)?u.foto[0]:u.foto;
    const el=document.createElement('div');el.className='card';
    el.innerHTML=`${f?`<img src="${f}">`:''}<div class="info"><b>${u.produk||''}</b><span>Rp ${(u.harga||0).toLocaleString('id-ID')}</span><p style="font-size:.8rem;color:#64748b">${u.penjual||''}</p></div>`;
    el.onclick=()=>window.open(`https://wa.me/${u.wa||''}`,'_blank');
    c.appendChild(el);
  });
}
load();
</script>
</body>
</html>
